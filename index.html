<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Valores</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">
    <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
        <h1 class="text-2xl font-bold mb-6 text-center text-gray-800">Calculadora</h1>
        <div class="mb-4">
            <label for="inputValue" class="block text-gray-700 text-sm font-bold mb-2">Valor:</label>
            <input type="text" id="inputValue" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Digite o valor aqui">
        </div>
        <div class="mb-6">
            <div class="flex justify-around">
                <label class="flex items-center">
                    <input type="radio" name="discount" value="0.35" class="form-radio h-5 w-5 text-blue-600" checked>
                    <span class="ml-2 text-gray-700 text-sm font-bold">Padrão (35%)</span>
                </label>
                <label class="flex items-center">
                    <input type="radio" name="discount" value="0.25" class="form-radio h-5 w-5 text-blue-600">
                    <span class="ml-2 text-gray-700 text-sm font-bold">Parceria (25%)</span>
                </label>
                <label class="flex items-center">
                    <input type="radio" name="discount" value="0.10" class="form-radio h-5 w-5 text-blue-600">
                    <span class="ml-2 text-gray-700 text-sm font-bold">Membros (10%)</span>
                </label>
            </div>
        </div>
        <div id="results" class="mt-6 border-t pt-6">
            <div class="flex justify-between items-center mb-4">
                <span class="text-gray-700 font-bold">Resultado da Lavagem:</span>
                <div class="flex items-center">
                    <span id="result1" class="text-xl font-semibold text-gray-900 mr-2">R$ 0,00</span>
                    <button id="copy1" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded text-xs">Copiar</button>
                </div>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-gray-700 font-bold">Comissão:</span>
                <div class="flex items-center">
                    <span id="result2" class="text-xl font-semibold text-gray-900 mr-2">R$ 0,00</span>
                    <button id="copy2" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded text-xs">Copiar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="snackbar" class="hidden fixed bottom-5 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg"></div>

    <script>
        const inputValue = document.getElementById('inputValue');
        const discounts = document.querySelectorAll('input[name="discount"]');
        const result1 = document.getElementById('result1');
        const result2 = document.getElementById('result2');
        const copy1 = document.getElementById('copy1');
        const copy2 = document.getElementById('copy2');

        let rawResults = { result1: 0, result2: 0 };

        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        function formatCurrency(num) {
            const parts = num.toFixed(2).split('.');
            const integerPart = formatNumber(parts[0]);
            const decimalPart = parts[1];
            return `${integerPart},${decimalPart}`;
        }

        function calculate() {
            const value = parseFloat(inputValue.value.replace(/\./g, ''));
            if (isNaN(value)) {
                result1.textContent = 'R$ 0,00';
                result2.textContent = 'R$ 0,00';
                rawResults = { result1: 0, result2: 0 };
                return;
            }

            const selectedRadio = document.querySelector('input[name="discount"]:checked');
            const discount = selectedRadio ? parseFloat(selectedRadio.value) : 0.35;
            const calculatedValue = value * (1 - discount);
            const difference = value - calculatedValue;
            const finalValue = difference * 0.10;

            rawResults.result1 = calculatedValue;
            rawResults.result2 = finalValue;

            result1.textContent = `R$ ${formatCurrency(calculatedValue)}`;
            result2.textContent = `R$ ${formatCurrency(finalValue)}`;
        }

        function showSnackbar(message) {
            const snackbar = document.getElementById('snackbar');
            snackbar.textContent = message;
            snackbar.classList.remove('hidden');
            setTimeout(() => {
                snackbar.classList.add('hidden');
            }, 3000);
        }

        function copyToClipboard(resultKey) {
            const rawValue = rawResults[resultKey];
            const integerValue = Math.floor(rawValue);
            navigator.clipboard.writeText(integerValue.toString()).then(() => {
                showSnackbar(`Valor ${integerValue} copiado!`);
            }).catch(err => {
                console.error('Falha ao copiar: ', err);
                showSnackbar('Falha ao copiar o valor.');
            });
        }

        inputValue.addEventListener('input', (event) => {
            let value = event.target.value.replace(/\D/g, '');
            if (value) {
                value = formatNumber(value);
            }
            event.target.value = value;
            calculate();
        });

        discounts.forEach(radio => {
            radio.addEventListener('change', calculate);
        });

        copy1.addEventListener('click', () => copyToClipboard('result1'));
        copy2.addEventListener('click', () => copyToClipboard('result2'));
    </script>
</body>
</html>